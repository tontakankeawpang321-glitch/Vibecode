<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>View Code</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SweetAlert2 CSS & JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1e1e2e; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        body {
            font-family: 'Prompt', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            overflow: hidden; 
        }

        .code-font { font-family: 'JetBrains Mono', monospace; }

        textarea {
            resize: none;
            outline: none;
            caret-color: #f472b6; 
        }

        /* üî• FIX: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏ß‡∏¢ !important ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Tailwind override */
        .tab-content {
            display: none !important;
            width: 100%;
            height: 100%;
        }
        
        .tab-content.active {
            display: flex !important;
            flex-direction: column;
            animation: fadeIn 0.2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0.9; transform: scale(0.99); }
            to { opacity: 1; transform: scale(1); }
        }

        /* SweetAlert2 Dark Theme Customization */
        div:where(.swal2-container) div:where(.swal2-popup) {
            background: #1f2937 !important; /* gray-800 */
            border: 1px solid #374151;
            color: #e5e7eb !important;
        }
        div:where(.swal2-title), div:where(.swal2-html-container) {
            color: #e5e7eb !important;
        }
    </style>
</head>
<body class="h-screen flex flex-col">

    <!-- Header -->
    <header class="h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-4 shrink-0 shadow-lg z-20">
        <div class="flex items-center gap-2">
            <div class="flex gap-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
            </div>
            <span class="ml-3 font-bold text-lg text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-violet-400">
                View Code
            </span>
        </div>
        <div class="flex gap-2">
            <!-- Copy Button -->
            <button onclick="copyCode()" class="group flex items-center gap-1 px-3 py-1.5 rounded-md bg-gray-800 hover:bg-blue-600 text-gray-300 hover:text-white transition-all border border-gray-700 hover:border-blue-500" title="Copy All">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                <span class="text-xs font-semibold">COPY</span>
            </button>
            
            <!-- Clear Button -->
            <button onclick="clearCode()" class="group flex items-center gap-1 px-3 py-1.5 rounded-md bg-gray-800 hover:bg-red-600 text-gray-300 hover:text-white transition-all border border-gray-700 hover:border-red-500" title="Delete All">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                <span class="text-xs font-semibold">CLEAR</span>
            </button>
        </div>
    </header>

    <!-- Main Workspace -->
    <main class="flex-1 overflow-hidden relative bg-[#1e1e2e]">
        
        <!-- Editor Pane -->
        <section id="editor-pane" class="tab-content active relative">
            <div class="absolute top-0 right-4 bg-blue-600/90 backdrop-blur text-[10px] px-3 py-1 text-white rounded-b-lg shadow-md z-10 font-bold tracking-wider">EDITOR</div>
            <textarea 
                id="code-editor" 
                class="w-full h-full bg-[#1e1e2e] text-gray-300 p-4 pt-8 md:p-6 text-sm md:text-base leading-relaxed code-font border-none focus:ring-0"
                spellcheck="false"
                placeholder="<!-- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î HTML ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->"
            ></textarea>
        </section>

        <!-- Preview Pane -->
        <section id="preview-pane" class="tab-content bg-white relative">
             <div class="absolute top-0 right-4 flex gap-2 z-10">
                <!-- ‡∏õ‡∏∏‡πà‡∏° Edit Code ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î -->
                <button onclick="switchTab('editor')" class="bg-pink-600/90 hover:bg-pink-500 backdrop-blur text-[10px] px-3 py-1 text-white rounded-b-lg shadow-md font-bold tracking-wider flex items-center gap-1 transition-colors border-t border-pink-500 cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    EDIT CODE
                </button>

                <div class="bg-green-600/90 backdrop-blur text-[10px] px-3 py-1 text-white rounded-b-lg shadow-md font-bold tracking-wider">PREVIEW</div>
             </div>
            <iframe id="preview-frame" class="w-full h-full border-none bg-white flex-1"></iframe>
        </section>

    </main>

    <!-- Bottom Navigation Bar -->
    <nav class="h-16 bg-gray-900 border-t border-gray-800 flex shrink-0 pb-safe z-30">
        <button onclick="switchTab('editor')" id="btn-editor" class="flex-1 flex flex-col items-center justify-center gap-1 text-pink-400 font-medium bg-gray-800/50 relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-full h-0.5 bg-pink-400"></div>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
            <span class="text-xs">Code</span>
        </button>
        
        <button onclick="switchTab('preview')" id="btn-preview" class="flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 hover:text-gray-300 font-medium relative group hover:bg-gray-800/30 transition-colors">
            <div class="absolute top-0 left-0 w-full h-0.5 bg-transparent group-hover:bg-gray-700 transition-colors"></div>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            <span class="text-xs">Preview</span>
        </button>
    </nav>

    <script>
        const defaultCode = `<!DOCTYPE html>
<html>
<style>
  body { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0;
    background: #000;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    overflow: hidden;
  }
  
  .container {
    text-align: center;
    padding: 20px;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  h1 {
    font-size: 3rem;
    margin: 0;
    background: linear-gradient(45deg, #ff00cc, #333399);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
  }

  p { color: #888; margin-top: 10px; }

  .btn {
    margin-top: 20px;
    padding: 12px 24px;
    background: #222;
    border: 1px solid #444;
    border-radius: 8px;
    color: #fff;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s;
  }

  .btn:hover {
    background: #ff00cc;
    border-color: #ff00cc;
    box-shadow: 0 0 15px #ff00cc;
  }
</style>
<body>

  <div class="container">
    <h1>View Code</h1>
    <p>‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î -> ‡∏Å‡∏î Preview ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
    <button class="btn" onclick="Swal.fire('‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î!', '‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ SweetAlert ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', 'success')">‡∏ó‡∏î‡∏™‡∏≠‡∏ö Alert</button>
  </div>

  <!-- ‡πÇ‡∏´‡∏•‡∏î SweetAlert ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Preview ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢ -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"><\/script>

</body>
</html>`;

        const editor = document.getElementById('code-editor');
        const preview = document.getElementById('preview-frame');

        window.onload = () => {
            const saved = localStorage.getItem('vibe-code-full');
            editor.value = saved ? saved : defaultCode;
            updatePreview();
        };

        editor.addEventListener('input', () => {
            localStorage.setItem('vibe-code-full', editor.value);
        });

        // üî• UPDATE: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πâ srcdoc ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö WebView ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
        function updatePreview() {
            preview.srcdoc = editor.value;
        }

        // üî• Clear Code ‡∏î‡πâ‡∏ß‡∏¢ SweetAlert2
        function clearCode() {
            Swal.fire({
                title: '‡∏•‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?',
                text: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏° ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ef4444',
                cancelButtonColor: '#4b5563',
                confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏•‡∏ö‡πÄ‡∏•‡∏¢!',
                cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
                background: '#1f2937',
                color: '#fff'
            }).then((result) => {
                if (result.isConfirmed) {
                    editor.value = '';
                    localStorage.removeItem('vibe-code-full');
                    updatePreview();
                    
                    Swal.fire({
                        title: '‡∏•‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!',
                        icon: 'success',
                        timer: 1500,
                        showConfirmButton: false,
                        background: '#1f2937',
                        color: '#fff'
                    });
                }
            });
        }

        // üî• Copy Code ‡∏î‡πâ‡∏ß‡∏¢ SweetAlert2 (Toast)
        function copyCode() {
            editor.select();
            document.execCommand('copy');
            editor.setSelectionRange(0,0);
            editor.blur();
            
            // ‡πÉ‡∏ä‡πâ Toast Notification ‡πÅ‡∏ó‡∏ô Alert ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 2000,
                timerProgressBar: true,
                background: '#374151',
                color: '#fff',
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                }
            });

            Toast.fire({
                icon: 'success',
                title: '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏•‡πâ‡∏ß!'
            });
        }

        function switchTab(tabName) {
            const editorPane = document.getElementById('editor-pane');
            const previewPane = document.getElementById('preview-pane');
            const btnEditor = document.getElementById('btn-editor');
            const btnPreview = document.getElementById('btn-preview');

            editorPane.classList.remove('active');
            previewPane.classList.remove('active');
            
            const inactiveClass = "flex-1 flex flex-col items-center justify-center gap-1 text-gray-500 hover:text-gray-300 font-medium relative group hover:bg-gray-800/30 transition-colors";
            const inactiveBar = '<div class="absolute top-0 left-0 w-full h-0.5 bg-transparent group-hover:bg-gray-700 transition-colors"></div>';
            
            const activeClass = "flex-1 flex flex-col items-center justify-center gap-1 font-medium bg-gray-800/50 relative overflow-hidden group";
            
            btnEditor.className = inactiveClass;
            btnEditor.innerHTML = inactiveBar + `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg><span class="text-xs">Code</span>`;
            
            btnPreview.className = inactiveClass;
            btnPreview.innerHTML = inactiveBar + `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg><span class="text-xs">Preview</span>`;

            if (tabName === 'editor') {
                editorPane.classList.add('active');
                btnEditor.className = activeClass + " text-pink-400";
                btnEditor.innerHTML = `<div class="absolute top-0 left-0 w-full h-0.5 bg-pink-400"></div>` + btnEditor.innerHTML.substring(inactiveBar.length); 
            } else {
                previewPane.classList.add('active');
                btnPreview.className = activeClass + " text-green-400";
                btnPreview.innerHTML = `<div class="absolute top-0 left-0 w-full h-0.5 bg-green-400"></div>` + btnPreview.innerHTML.substring(inactiveBar.length);
                
                updatePreview();
            }
        }
    </script>
</body>
</html>
